<div class="modal-shiftfix">
	<div class="container-fluid main-content">
		<div class="row">
			<!-- Conversation -->
			<div class="col-lg-12">
				<div class="widget-container scrollable chat chat-page">
					<div class="contact-list">
						<div class="heading">
							Contacts (15)<i class="icon-plus pull-right"></i>
						</div>
						<ul>
							<%@users.each do |user|%>
								<li>
								<a id="user_list_<%=user.id%>"onclick="load_user_chat('<%=user.id%>')"><img width="30" height="30" src="/player/<%=user.filename%>.png"><%=user.name%><i class="icon-circle text-danger"></i></a>
								</li>
							<%end%>
						</ul>
					</div>
					<div class="heading">
						<a href="#" onclick="msg_flush()" >flush</a>
					</div>
					<%=render :partial => 'layouts/common_view', :locals => {:mode => 'web'}%>
				</div>
			</div>
		</div>
	</div>
</div>

<script>
	var my_user_id = '1' 
	var target_user_id = '2' //TODO change this.
	var user
	<%=render :partial => 'layouts/common_function', :locals => {:mode => 'web'}%>
	function load_user_chat(user_id){
		//TODO change btn-primary class
		for(i=1;i<user.length;i++)
			$("#user_list_" + i).removeClass("btn-primary")
		$("#user_list_" + user_id).addClass("btn-primary")

		$("#message_area").html("");
		target_user_id = user_id
		receive_previous_msg(my_user_id, user)
	}
</script>
